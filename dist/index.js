"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireWildcard(require("react")),_simpleDate=_interopRequireDefault(require("simple-date")),_bgBlocker=_interopRequireDefault(require("./bg-blocker"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,c):{};d.get||d.set?Object.defineProperty(b,c,d):b[c]=a[c]}return b.default=a,b}function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}function _arrayWithHoles(a){if(Array.isArray(a))return a}var months=["","January","February","March","April","May","June","July","August","September","October","November","December"],weekdays=["","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],btnfinish="DONE",hasErrorButton="INVALID DATE",DateCalendar=function(a){var b=a.date,c=a.format,d=a.disabled;c||(c="YYYY-MM-DD");var e=(0,_react.useState)(!1),f=_slicedToArray(e,2),g=f[0],h=f[1],i=(0,_simpleDate.default)(b,c),j=!1,k=function(b){return d?null:void a.onChange(b.format(c))};if(""===b||!i.isValid()){i=(0,_simpleDate.default)();for(var l=!0,m=0;l&&10>m++;)a.isDateDisabled&&a.isDateDisabled(i)?i.modify(1,"day"):l=!1}else a.isDateDisabled&&a.isDateDisabled(i)&&(j=!0);var n=function(a){return a.preventDefault(),a.stopPropagation(),d?null:void h(!0)};return _react.default.createElement("div",{className:"date-calendar-container".concat(a.className?" ".concat(a.className):"").concat(j?" error":"")},_react.default.createElement("input",{className:"input-date-calendar".concat(a.inputClassName?" ".concat(a.inputClassName):""),placeholder:a.placeholder?a.placeholder:"",value:b,onMouseDown:function onMouseDown(a){return n(a)},onChange:function onChange(){return!1},disabled:d}),g?_react.default.createElement("div",{className:"area-calendar-all"},_react.default.createElement(Calendar,{dt:i,literaldate:b,onClose:function onClose(){return h(!1)},onChange:k,hasError:j,isDateDisabled:a.isDateDisabled})):null)},shakeCalendar=function(a){a&&(a.classList.add("clicked"),setTimeout(function(){a.classList.remove("clicked")},600))},_cb=null,myCallback=function(a){return _cb=a,_cb},Calendar=function(a){var b=a.dt,c=a.hasError,d=(0,_react.useRef)(),e=function(){return c&&""!==a.literaldate?shakeCalendar(d.current):void(a.onClose(),_bgBlocker.default.remove())},f=myCallback(e);(0,_react.useEffect)(function(){_bgBlocker.default.create(),_bgBlocker.default.onClick(f)},[f]);var g=function(c,d){var e=(0,_simpleDate.default)(b.format("YYYY-MM-DD"));"left"===c?e.modify(-1,d):e.modify(1,d),a.onChange(e)};return _react.default.createElement("div",{className:"date-calendar-view".concat(c?" error":""),ref:d},_react.default.createElement("div",{className:"arwtop"}),_react.default.createElement("div",{className:"date-calendar-header"},_react.default.createElement("button",{className:"arrow",onClick:function onClick(){return g("left","month")}},"<"),_react.default.createElement("span",null,months[b.format("M")].substr(0,3)),_react.default.createElement("button",{className:"arrow",onClick:function onClick(){return g("right","month")}},">")),_react.default.createElement("div",{className:"date-calendar-day"},_react.default.createElement("button",{className:"arrow",onClick:function onClick(){return g("left","day")}},"<"),_react.default.createElement("div",{className:"content"},_react.default.createElement("span",null,b.format("DD")),_react.default.createElement("div",null,weekdays[b.format("N")])),_react.default.createElement("button",{className:"arrow",onClick:function onClick(){return g("right","day")}},">")),_react.default.createElement("div",{className:"date-calendar-year"},_react.default.createElement("button",{className:"arrow",onClick:function onClick(){return g("left","year")}},"<"),_react.default.createElement("div",{className:"content"},_react.default.createElement("span",null,b.format("YYYY"))),_react.default.createElement("button",{className:"arrow",onClick:function onClick(){return g("right","year")}},">")),_react.default.createElement("div",{className:"date-calendar-accept"},_react.default.createElement("button",{className:"btnfinish",onClick:function clickDone(){return c&&""!==a.literaldate?shakeCalendar(d.current):void(a.onChange(b),e())}},c?hasErrorButton:btnfinish)))},_default=DateCalendar;exports.default=_default;